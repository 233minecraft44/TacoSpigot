From 0cb927d7220ab24eb68799e981861a88fe244053 Mon Sep 17 00:00:00 2001
From: Techcable <Techcable@outlook.com>
Date: Wed, 23 Sep 2015 12:29:13 -0700
Subject: [PATCH] Add ArrowCollideEvent


diff --git a/src/main/java/net/minecraft/server/EntityArrow.java b/src/main/java/net/minecraft/server/EntityArrow.java
index 5ccdb88..da3c63c 100644
--- a/src/main/java/net/minecraft/server/EntityArrow.java
+++ b/src/main/java/net/minecraft/server/EntityArrow.java
@@ -9,6 +9,11 @@ import org.bukkit.entity.LivingEntity;
 import org.bukkit.event.entity.EntityCombustByEntityEvent;
 import org.bukkit.event.player.PlayerPickupItemEvent;
 // CraftBukkit end
+// TacoSpigot start
+import net.techcable.tacospigot.event.entity.ArrowCollideEvent;
+import org.bukkit.entity.Arrow;
+// TacoSpigot end
+
 
 public abstract class EntityArrow extends Entity implements IProjectile {
 
@@ -192,6 +197,16 @@ public abstract class EntityArrow extends Entity implements IProjectile {
             }
             // Paper end
 
+            // TacoSpigot start - fire collide event
+            if (movingobjectposition != null && movingobjectposition.entity != null) {
+                ArrowCollideEvent event = new ArrowCollideEvent((Arrow) this.getBukkitEntity(), movingobjectposition.entity.getBukkitEntity());
+                this.world.getServer().getPluginManager().callEvent(event);
+                if (event.isCancelled()) {
+                    movingobjectposition = null;
+                }
+            }
+            // TacoSpigot end
+
             if (movingobjectposition != null) {
                 this.a(movingobjectposition);
             }
-- 
2.7.1

